import { BlockImage } from '@/components'
import img82cb58d_cloudsmith_one_login_1 from './images/single-sign-on-with-onelogin/82cb58d-cloudsmith-one-login-1.png'
import img34b72c5_cloudsmith_one_login_2 from './images/single-sign-on-with-onelogin/34b72c5-cloudsmith-one-login-2.png'
import img86bddab_cloudsmith_one_login_3 from './images/single-sign-on-with-onelogin/86bddab-cloudsmith-one-login-3.png'
import img0027387_cloudsmith_one_login_4 from './images/single-sign-on-with-onelogin/0027387-cloudsmith-one-login-4.png'
import img3e15f56_cloudsmith_one_login_6 from './images/single-sign-on-with-onelogin/3e15f56-cloudsmith-one-login-6.png'
import imgadeced6_cloudsmith_one_login_7 from './images/single-sign-on-with-onelogin/adeced6-cloudsmith-one-login-7.png'
import img21f39b8_Screen_Shot_2019_07_16_at_00_26_21 from './images/single-sign-on-with-onelogin/21f39b8-Screen_Shot_2019-07-16_at_00.26.21.png'
import img9e74fe9_cloudsmith_one_login_9 from './images/single-sign-on-with-onelogin/9e74fe9-cloudsmith-one-login-9.png'
import img24cfb10_1 from './images/single-sign-on-with-onelogin/24cfb10-1.png'
import imgaf16926_11 from './images/single-sign-on-with-onelogin/af16926-11.png'
import imgfaf1d96_cloudsmith_one_login_11 from './images/single-sign-on-with-onelogin/faf1d96-cloudsmith-one-login-11.png'
import img08c9329_image from './images/single-sign-on-with-onelogin/08c9329-image.png'
import imgfa71597_cloudsmith_one_login_12 from './images/single-sign-on-with-onelogin/fa71597-cloudsmith-one-login-12.png'
import img43482ad_cloudsmith_one_login_13 from './images/single-sign-on-with-onelogin/43482ad-cloudsmith-one-login-13.png'
import img32b32f1_cloudsmith_one_login_14 from './images/single-sign-on-with-onelogin/32b32f1-cloudsmith-one-login-14.png'

# Single Sign-On with OneLogin

This guide provides step-by-step instructions on setting up [OneLogin](https://www.onelogin.com/) as a SAML IdP for your Cloudsmith Organization.

## Adding Cloudsmith to OneLogin

Cloudsmith is not yet an integrated application in OneLogin. You'll have to add Cloudsmith manually so you can configure SSO.

### Step 1
Log into OneLogin and click **Administration** in the top right:

<BlockImage src={img82cb58d_cloudsmith_one_login_1} alt=""></BlockImage>

### Step 2
Choose **Applications** from the top menu:

<BlockImage src={img34b72c5_cloudsmith_one_login_2 } alt=""></BlockImage>

### Step 3
Click the blue **Add App** button in the top right:

<BlockImage src={img86bddab_cloudsmith_one_login_3} alt=""></BlockImage>

### Step 4

Search for "SAML test connector" and choose "SAML Test Connector (Advanced)":

<BlockImage src={img0027387_cloudsmith_one_login_4} alt=""></BlockImage>

### Step 5
On the next screen (**Add SAML Test Connector (Advanced)**), enter the **Display Name** as "Cloudsmith". (You can optionally add the Cloudsmith logo too for easier visibility, you can find hi-res versions of the logo [here](https://cloudsmith.com/company/brand)):

### Step 6
Click the blue **Save** button in the top right:

<BlockImage src={img3e15f56_cloudsmith_one_login_6} alt=""></BlockImage>

### Step 7
Once saved, a number of additional options will appear in the sidebar. Click "Configuration":

<BlockImage src={imgadeced6_cloudsmith_one_login_7} alt=""></BlockImage>

### Step 8
Next, we'll configure SAML settings. To determine your **Single sign on URL** we use the following format: "https://app.cloudsmith.com/WORKSPACE/saml/acs/", where "WORKSPACE" is replaced with your organization's slug.  
We use this URL for the **Audience**, **Recipient**, and **ACS (Consumer) URL** values in the form below.

For **ACS (Consumer) URL Validator** use ".\*".

<BlockImage src={img21f39b8_Screen_Shot_2019_07_16_at_00_26_21} alt=""></BlockImage>

### Step 9
Further down the page, for **SAML signature element ** choose "Assertion".

<BlockImage src={img9e74fe9_cloudsmith_one_login_9} alt=""></BlockImage>

### Step 10
Hit the blue **Save** button at the top of the page.

### Step 11
Next, we'll configure OneLogin to also send the user's first and last names during sign-in.

Click on **Parameters** in the sidebar, and then the small blue "+" symbol on the right:

<BlockImage src={img24cfb10_1} alt=""></BlockImage>


### Step 12
Add a new parameter named "FirstName" and ensure the box labelled "Include in SAML assertion" is checked:

<BlockImage src={imgaf16926_11} alt=""></BlockImage>

Hit the blue **Save** button. Then choose **First Name** from the drop-down presented:

<BlockImage src={imgfaf1d96_cloudsmith_one_login_11} alt=""></BlockImage>

Hit the blue **Save** button.

### Step 13
Repeat the above process for the "LastName" attribute.

### Step 14
Hit the blue **Save** button in the top-right to save all changes. Once configured, the parameters should appear as below:

<BlockImage src={img08c9329_image} alt=""></BlockImage>

### Step 15
Choose the **SSO** tab in the sidebar and change the** SAML Signature Algorithm** to "SHA-256".

<BlockImage src={imgfa71597_cloudsmith_one_login_12} alt=""></BlockImage>

### Step 16
Hit the blue **Save** button in the top-right to save all changes.

### Step 17
Your application is now configured on OneLogin and you can add users groups as required using the **Users** tab in the sidebar:

<BlockImage src={img43482ad_cloudsmith_one_login_13} alt=""></BlockImage>

## Providing configuration to Cloudsmith

Once configured as above, you'll need to provide metadata to Cloudsmith to connect to your newly configured IdP.

In the **SSO** tab of your configuration screen you should see a link that provides metadata for dynamic configuration. This is named **Issuer URL**:

<BlockImage src={img32b32f1_cloudsmith_one_login_14} alt=""></BlockImage>

Copy this link and add it to your Cloudsmith organization [SAML settings](/authentication/single-sign-on#enable-saml).

## All wrapped up!

Your application should now appear on the OneLogin portal.

You can then enable SAML authentication in your Cloudsmith [SAML settings](/authentication/single-sign-on#enable-saml) and you can use OneLogin to begin logging in straight away.

You'll be able to access the landing page of your organization at the following URL:  
https://app.cloudsmith.com/WORKSPACE/saml/login/

Where _WORKSPACE_ is your organization's slug/identifier (what you would normally see in the URL when accessing your organization within Cloudsmith).
